{"version":3,"sources":["../../src/services/purchases.service.js"],"names":["doc","GoogleSpreadsheet","appConfig","process","env","NODE_ENV","googleSheetId","list","limit","offset","database","Purchase","findAndCountAll","create","purchaseData","readyPurchase","products","productRow","addProduct","id","through","count"],"mappings":";;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA,IAAMA,GAAG,GAAG,IAAIC,6BAAJ,CAAsBC,gBAAUC,OAAO,CAACC,GAAR,CAAYC,QAAZ,IAAwB,aAAlC,EAAiDC,aAAvE,CAAZ;;SAEsBC,I;;;;;;;+BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsBC,YAAAA,KAAtB,QAAsBA,KAAtB,EAA6BC,MAA7B,QAA6BA,MAA7B;AAAA;AAAA;AAAA,mBAEUC,mBAASC,QAAT,CAAkBC,eAAlB,CAAkC;AAAEJ,cAAAA,KAAK,EAALA,KAAF;AAASC,cAAAA,MAAM,EAANA;AAAT,aAAlC,CAFV;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;SAQeI,M;;;;;;;+BAAf,kBAAsBC,YAAtB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEyBJ,mBAASC,QAAT,CAAkBE,MAAlB,CAAyBC,YAAzB,CAFzB;;AAAA;AAEGC,YAAAA,aAFH;AAAA;AAAA;AAAA;AAAA;;AAIH,6BAAyBD,YAAY,CAACE,QAAtC,uHAAgD;AAArCC,cAAAA,UAAqC;AAC9CF,cAAAA,aAAa,CAACG,UAAd,CAAyBD,UAAU,CAACE,EAApC,EAAwC;AAAEC,gBAAAA,OAAO,EAAE;AAAEC,kBAAAA,KAAK,EAAEJ,UAAU,CAACI;AAApB;AAAX,eAAxC;AACD;;AANE;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,8CAQIN,aARJ;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import GoogleSpreadsheet from \"google-spreadsheet\";\nimport database from \"../models\";\nimport appConfig from \"../config/app\";\n\nconst doc = new GoogleSpreadsheet(appConfig[process.env.NODE_ENV || \"development\"].googleSheetId);\n\nexport async function list({ limit, offset }) {\n  try {\n    return await database.Purchase.findAndCountAll({ limit, offset });\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function create(purchaseData) {\n  try {\n    const readyPurchase = await database.Purchase.create(purchaseData);\n\n    for (const productRow of purchaseData.products) {\n      readyPurchase.addProduct(productRow.id, { through: { count: productRow.count } });\n    }\n\n    return readyPurchase;\n  } catch (error) {\n    throw error;\n  }\n}\n"],"file":"purchases.service.js"}