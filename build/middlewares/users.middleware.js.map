{"version":3,"sources":["../../src/middlewares/users.middleware.js"],"names":["responseUtils","ResponseUtils","validateUser","req","res","next","seecret","appConfig","process","env","NODE_ENV","jwt","verify","headers","err","decoded","setError","message","send","body","UserId","id"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA,IAAMA,aAAa,GAAG,IAAIC,oBAAJ,EAAtB;;SAEsBC,Y;;;;;;;+BAAf,iBAA4BC,GAA5B,EAAiCC,GAAjC,EAAsCC,IAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AACCC,YAAAA,OADD,GACWC,gBAAUC,OAAO,CAACC,GAAR,CAAYC,QAAZ,IAAwB,aAAlC,EAAiDJ,OAD5D;;AAGLK,qCAAIC,MAAJ,CAAWT,GAAG,CAACU,OAAJ,CAAY,gBAAZ,CAAX,EAA0CP,OAA1C,EAAmD,UAASQ,GAAT,EAAcC,OAAd,EAAuB;AACxE,kBAAID,GAAJ,EAAS;AACP,uBAAOd,aAAa,CAACgB,QAAd,CAAuB,GAAvB,EAA4BF,GAAG,CAACG,OAAhC,EAAyCC,IAAzC,CAA8Cd,GAA9C,CAAP;AACD,eAFD,MAEO;AACL;AACAD,gBAAAA,GAAG,CAACgB,IAAJ,CAASC,MAAT,GAAkBL,OAAO,CAACM,EAA1B;AACAhB,gBAAAA,IAAI;AACL;AACF,aARD;;AAHK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import jwt from \"jsonwebtoken\";\nimport ResponseUtils from \"../utils/response.utils\";\nimport appConfig from \"../config/app\";\n\nconst responseUtils = new ResponseUtils();\n\nexport async function validateUser(req, res, next) {\n  const seecret = appConfig[process.env.NODE_ENV || \"development\"].seecret;\n\n  jwt.verify(req.headers[\"x-access-token\"], seecret, function(err, decoded) {\n    if (err) {\n      return responseUtils.setError(400, err.message).send(res);\n    } else {\n      // add user id to request\n      req.body.UserId = decoded.id;\n      next();\n    }\n  });\n}\n"],"file":"users.middleware.js"}